--------UDP SERVER--------
import java.net.*;
import java.io.*;

class UDPServer {

    public static void main(String[] args) throws Exception {

        DatagramSocket socket = new DatagramSocket(5454);
        BufferedReader br =
                new BufferedReader(new InputStreamReader(System.in));

        System.out.println("Server started...");

        byte[] buffer = new byte[1024];

        // receive first packet to know client address
        DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
        socket.receive(packet);

        InetAddress ip = packet.getAddress();
        int port = packet.getPort();

        while (true) {

            System.out.print("Enter message: ");
            String msg = br.readLine();

            byte[] sendData = msg.getBytes();

            DatagramPacket sendPacket =
                    new DatagramPacket(sendData, sendData.length, ip, port);

            socket.send(sendPacket);
        }
    }
}


--------UDP CLIENT--------
import java.net.*;

class UDPClient {

    public static void main(String[] args) throws Exception {

        DatagramSocket socket = new DatagramSocket();

        InetAddress ip = InetAddress.getByName("localhost");

        // send dummy packet to connect
        byte[] data = "start".getBytes();
        DatagramPacket packet =
                new DatagramPacket(data, data.length, ip, 5454);

        socket.send(packet);

        byte[] buffer = new byte[1024];

        while (true) {

            DatagramPacket receivePacket =
                    new DatagramPacket(buffer, buffer.length);

            socket.receive(receivePacket);

            String msg = new String(receivePacket.getData(), 0,
                    receivePacket.getLength());

            System.out.println("From Server: " + msg);
        }
    }
}
